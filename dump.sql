CREATE SCHEMA `manicure`;
USE `manicure`;
CREATE TABLE `role` ( `id` INT NOT NULL AUTO_INCREMENT, `name` VARCHAR(45) NOT NULL, PRIMARY KEY (`id`)) ENGINE = InnoDB;
CREATE TABLE `user` ( `id` INT NOT NULL AUTO_INCREMENT, `username` VARCHAR(45) NOT NULL, `password` VARCHAR(45) NOT NULL, `fio` VARCHAR(45) NOT NULL, `role_id` INT NOT NULL, PRIMARY KEY (`id`), INDEX `fk_user_role_idx` (`role_id` ASC) VISIBLE, CONSTRAINT `fk_user_role` FOREIGN KEY (`role_id`) REFERENCES `role` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION) ENGINE = InnoDB;
CREATE TABLE `client` ( `id` INT NOT NULL AUTO_INCREMENT, `first_name` VARCHAR(45) NOT NULL, `number` VARCHAR(45) NOT NULL, PRIMARY KEY (`id`)) ENGINE = InnoDB;
CREATE TABLE `status` ( `id` INT NOT NULL AUTO_INCREMENT, `name` VARCHAR(45) NOT NULL, PRIMARY KEY (`id`)) ENGINE = InnoDB;
CREATE TABLE `order` ( `id` INT NOT NULL AUTO_INCREMENT, `date` DATETIME NOT NULL, `client_id` INT NOT NULL, `user_id` INT NOT NULL, `status_id` INT NOT NULL DEFAULT '1', PRIMARY KEY (`id`), INDEX `fk_order_client1_idx` (`client_id` ASC) VISIBLE, INDEX `fk_order_user1_idx` (`user_id` ASC) VISIBLE, INDEX `fk_order_status1_idx` (`status_id` ASC) VISIBLE, CONSTRAINT `fk_order_client1` FOREIGN KEY (`client_id`) REFERENCES `client` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_order_user1` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_order_status1` FOREIGN KEY (`status_id`) REFERENCES `status` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION) ENGINE = InnoDB;
CREATE TABLE `service_type` ( `id` INT NOT NULL AUTO_INCREMENT, `name` VARCHAR(45) NOT NULL, `price` FLOAT NOT NULL, `duration` TIME NOT NULL, `hidden` INT NOT NULL DEFAULT '0', PRIMARY KEY (`id`)) ENGINE = InnoDB;
CREATE TABLE `order_has_service_type` ( `order_id` INT NOT NULL, `service_type_id` INT NOT NULL, PRIMARY KEY (`order_id`, `service_type_id`), INDEX `fk_order_has_service_type_service_type1_idx` (`service_type_id` ASC) VISIBLE, INDEX `fk_order_has_service_type_order1_idx` (`order_id` ASC) VISIBLE, CONSTRAINT `fk_order_has_service_type_order1` FOREIGN KEY (`order_id`) REFERENCES `order` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_order_has_service_type_service_type1` FOREIGN KEY (`service_type_id`) REFERENCES `service_type` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION) ENGINE = InnoDB;
INSERT INTO `role` VALUES (1,'������'),(2,'�������������');
INSERT INTO `status` VALUES (1,'�����'),(2,'� ������'), (3, '��������');
INSERT INTO `user` VALUES (1,'root','63a9f0ea7bb98050796b649e85481845','root',2);